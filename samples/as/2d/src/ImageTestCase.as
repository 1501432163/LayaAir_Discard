package
{
	import laya.display.Sprite;
	import laya.net.Loader;
	import laya.renders.Render;
	import laya.resource.HTMLCanvas;
	import laya.resource.HTMLImage;
	import laya.resource.Texture;
	import laya.utils.Browser;
	import laya.utils.Handler;
	import laya.webgl.resource.WebGLImage;
	
	public class ImageTestCase extends Sprite
	{
		public function ImageTestCase()
		{
			super();
			startLoad();
		}


		private var _texture:Texture;
		private function startLoad():void
		{			
			var url:* = "data:image/png;base64,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";

			var image:*;
			var onload:Function = function():void {
				//DebugTool.log("Load image ok");
				this.onTextureLoaded(new Texture(image));
			};
			var onerror:Function = function():void {
				//DebugTool.log("Load image filed");
			};

			image = HTMLImage.create(url, {onload: onload, onerror: onerror, debug: true});
		}
		
		private function onTextureLoaded(tex:Texture):void {
			//DebugTool.log("onTextureLoaded ok");
			if (tex) {
				//DebugTool.log("onTextureLoaded ok", tex);
				this.graphics.clear();
				this.graphics.drawTexture(tex, 0, 0);
			}
			if(this._texture) this._texture.destroy(true);				
			this._texture = tex;
		}
		
		public function dispose():void
		{
		}
	}
}